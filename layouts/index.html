{{- define "main" }}

<div style="position: relative; width: 100%; margin: 0 0 24px 0;">
	<img src="{{ site.Data.homepage.hero.image }}" alt="{{ site.Data.homepage.hero.imageAlt }}" style="width: 100%; display: block; border-radius: 0;">
	<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.1) 100%);"></div>
</div>

<div style="border: 1px solid #e0e7f5; border-radius: 12px; padding: 24px; margin: 0 0 28px 0; text-align: center;">
	<h1 style="margin: 0 0 12px 0; font-size: 2rem; line-height: 1.2; color: inherit;">{{ site.Data.homepage.hero.title }}</h1>
	<p style="margin: 0; font-size: 1.05rem; line-height: 1.5; color: inherit;">{{ site.Data.homepage.hero.description }}</p>
</div>

{{- $latest := index (sort site.Data.discography.releases "releaseDate" "desc") 0 -}}
<div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: center; margin-bottom: 24px; border: 1px solid #ededed; border-radius: 10px; padding: 18px;">
	<img src="{{ $latest.releaseOf.image }}" alt="{{ $latest.releaseOf.imageAlt }}" style="width: 180px; max-width: 40%; min-width: 160px; border-radius: 8px; box-shadow: 0 8px 18px rgba(0,0,0,0.08);">
	<div style="flex: 1 1 240px; min-width: 240px;">
		<p style="margin: 0 0 6px 0; font-weight: 700;">Latest release Â· {{ $latest.releaseOf.title }}</p>
		<p style="margin: 0 0 12px 0;">{{ $latest.releaseOf.shortDescription }}</p>
		<div style="display: flex; flex-wrap: wrap; gap: 10px;">
			{{- range $latest.releaseOf.streaming }}
			<a href="{{ .url }}" {{ printf "onclick=\"gtag('event', 'streaming_click', {'event_label': '%s_%s'});\"" (.platform | lower) ($latest.releaseOf.title | urlize) | safeHTMLAttr }} style="background: #1db954; color: #fff; padding: 9px 14px; border-radius: 6px; text-decoration: none; font-weight: 700;"><i class="{{ .icon }}"></i> {{ .platform }}</a>
			{{- end }}
		</div>
	</div>
</div>

<div style="border: 1px solid #ededed; border-radius: 10px; padding: 16px; margin: 0 0 24px 0; text-align: center;">
	<p style="margin: 0 0 10px 0; font-weight: 700;">Stay connected</p>
	<div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
		{{- range site.Params.social }}
		<a href="{{ .url }}" {{ printf "onclick=\"gtag('event', 'social_click', {'event_label': '%s'});\"" (.name | lower) | safeHTMLAttr }} style="background: #111; color: #fff; padding: 9px 14px; border-radius: 6px; text-decoration: none; font-weight: 700;"><i class="{{ .icon }}"></i> {{ .name }}</a>
		{{- end }}
	</div>
</div>

<div style="margin: 0 0 30px 0;">
	<p style="margin: 0 0 12px 0; font-weight: 700;">Watch</p>
	{{- range site.Data.homepage.videos }}
	<div style="position: relative; padding-top: 56.25%; border-radius: 10px; overflow: hidden; box-shadow: 0 10px 24px rgba(0,0,0,0.12); margin-bottom: 20px;">
		<iframe src="{{ .url }}" title="{{ .title }}" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen loading="lazy"></iframe>
	</div>
	{{- end }}
</div>

{{- if site.Data.homepage.instagram_posts }}
<div style="margin: 0 0 30px 0;">
	<p style="margin: 0 0 12px 0; font-weight: 700;">Latest from Instagram</p>
	<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
		{{- range site.Data.homepage.instagram_posts }}
		{{- $shortcode := printf "{{< instagram %s >}}" .id }}
		{{ $shortcode | $.Page.RenderString }}
		{{- end }}
	</div>
</div>
{{- end }}

<div style="margin: 0 0 30px 0;">
	<p style="margin: 0 0 12px 0; font-weight: 700;">News</p>
    {{- range site.Data.homepage.news }}
    <div style="border-left: 4px solid #111; padding: 14px 18px; margin: 0 0 24px 0; border-radius: 6px;">
        <p style="margin: 0; font-size: 0.95rem;">{{ .message | markdownify }}</p>
    </div>
    {{- end }}
</div>

{{- end }}
